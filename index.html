<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Speechster 1000</title>
  <link rel="stylesheet" href="/style.css" />
  <script type="module" src="/main.js"></script>
</head>
<body class="dark-mode">
  <noscript><p style="color:red;text-align:center">Please enable JavaScript to use Speechster 1000.</p></noscript>

  <div id="particle-container"></div>

  <div id="app-container">
    <!-- Auth Screen -->
    <div id="auth-screen" class="screen active">
      <h1>Welcome to Speechster 1000</h1>
      <p>Please log in or register to continue.</p>
      <div id="auth-forms-container">
        <form id="login-form">
          <h2>Login</h2>
          <input type="email" id="login-email" placeholder="Email" required />
          <input type="password" id="login-password" placeholder="Password" required />
          <button type="submit" class="btn">Login</button>
          <p class="auth-message" id="login-message"></p>
        </form>

        <hr />

        <form id="register-form">
          <h2>Register</h2>
          <input type="text" id="register-username" placeholder="Username" required />
          <input type="email" id="register-email" placeholder="Email" required />
          <input type="password" id="register-password" placeholder="Password" required />
          <select id="register-designation" required>
            <option value="" disabled selected>Select Designation</option>
            <option value="patient">Patient</option>
            <option value="doctor">Doctor</option>
          </select>
          <button type="submit" class="btn">Register</button>
          <p class="auth-message" id="register-message"></p>
        </form>
      </div>
    </div>

    <!-- Mode Selection -->
    <div id="mode-selection-screen" class="screen">
      <h1>Speechster 1000</h1>
      <p>Welcome to the Speechster 1000 Interface. Please select a mode to begin.</p>
      <hr />
      <div class="button-container">
        <button id="practice-mode-btn" class="btn">Practice</button>
        <button id="game-mode-btn-1" class="btn">Game 1</button>
        <button id="game-mode-btn-2" class="btn">Game 2</button>
      </div>
      <hr />
      <div id="connection-status-container">
        <div id="device-light" class="red-light"></div>
        <span id="bluetooth-status">Disconnected</span>
      </div>
      <div class="bottom-buttons">
        <button id="connect-button" class="btn">Connect</button>
        <button id="settings-btn" class="btn">Settings</button>
      </div>
      <button id="logout-btn" class="btn logout-btn">Log Out</button>
    </div>

    <!-- Practice -->
<div id="practice-screen" class="screen">
      <button id="practice-back" class="back-btn">&#8592;</button>
      <h1>Practice Mode</h1>
      <p>Successfully make the sound told by your therapist.</p>
      <span class="score-display" id="practice-count">0</span>
      <p id="practice-feedback" class="feedback-message"></p>
      <div class="button-container">
        <button id="start-practice-btn" class="btn">Start!</button>
      </div>
    </div>

    <!-- Game 1 -->
<div id="game-screen-1" class="screen">
      <button id="game-1-back" class="back-btn">&#8592;</button>
      <h1>Game 1: Tongue Sensor</h1>
      <p>Click "Start!" to start the 3-minute timer. The score will increase every time you touch the top part of your mouth.</p>
      <span class="timer" id="game-1-timer">03:00</span>
      <span class="score-display" id="game-1-score">0</span>
      <p id="game-1-feedback" class="feedback-message"></p>
      <div class="button-container">
        <button id="ready-btn" class="btn">Start!</button>
      </div>
    </div>

    <!-- Game 2 -->
<div id="game-screen-2" class="screen">
      <button id="game-2-back" class="back-btn">&#8592;</button>
      <h1>Game 2: Word Recognition</h1>
      <p>Click "Start!" to begin the 1-minute timer. The word will change every time you successfully say the word specified.</p>
      <span class="timer" id="game-2-timer">01:00</span>
      <h2 id="current-word">hello</h2>
      <span class="score-display" id="game-2-score">0</span>
      <p id="game-2-feedback" class="feedback-message"></p>
      <div class="button-container">
        <button id="start-game-2" class="btn">Start!</button>
      </div>
    </div>

    <!-- Settings -->
    <div id="settings-screen" class="screen">
      <button id="settings-back" class="back-btn">&#8592;</button>
      <h1>Settings</h1>
      <p>Customize your experience.</p>
      <hr />
      <div class="button-container">
        <button id="light-mode-btn" class="btn">Light Mode</button>
        <button id="dark-mode-btn" class="btn">Dark Mode</button>
      </div>
    </div>
  </div>

  <!-- Firebase Modules -->
  <script type="module">
   import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
    import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, signOut, onAuthStateChanged } 
      from "https://www.gstatic.com/firebasejs/10.12.0/firebase-auth.js";
    import { getDatabase, ref, set, push, onValue, serverTimestamp } 
      from "https://www.gstatic.com/firebasejs/10.12.0/firebase-database.js";

    const firebaseConfig = {
      apiKey: "AIzaSyC4o7uIHSqRChe0k5LZOfnFDCr-vBWoqvY",
      authDomain: "speechster-1000.firebaseapp.com",
      databaseURL: "https://speechster-1000-default-rtdb.europe-west1.firebasedatabase.app",
      projectId: "speechster-1000",
      storageBucket: "speechster-1000.firebasestorage.app",
      messagingSenderId: "543492593404",
      appId: "1:543492593404:web:df0f06a3db1af716626979",
      measurementId: "G-RM7GFYFZB9"
    };

    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    const db = getDatabase(app);

    // Make auth/db accessible to main.js
    window.firebaseApp = app;
    window.firebaseAuth = auth;
    window.firebaseDb = db;

  </script>
</body>
</html>